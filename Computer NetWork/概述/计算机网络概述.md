> 计算机网络的概述，完整思维导图见GitHub  ==>[计算机网络概述思维导图](https://github.com/Kay-Rick/Resources/tree/master/Computer%20NetWork/%E6%A6%82%E8%BF%B0)



![image-20200806100256009](https://kay-rick.oss-cn-beijing.aliyuncs.com/img/image-20200806100256009.png)

</br>

## 端到端数据传输的两种基本技术

</br>

### 电路交换

电路交换常用于电话通信系统，两个用户要通信之前需要**建立一条专用的物理链路**，并且在整个通信过程中**始终占用该链路**。

需要在数据正式传输之前，**协商预留端到端资源**：即预留端系统之间通信路径上，所需要的资源，包括交换机的缓存，链路带宽等资源，**这种预留的资源是在建立连接的时候预留的**。在建立连接的时候，相关资源就被协商确定下来。既然有预留的资源，那发送方就可以以**恒定速率向接收方传送数据**。

缺点：效率较低：静默期（无数据传输）专用电路空闲，网络资源被浪费；创建端到端电路及预留端到端带宽的过程复杂

在电路交换中，网络资源（如带宽）被分片，多路复用，每个分片被分配到会话下，分片没有被会话使用的情况下，分片空载（不共享）

</br>

#### 多路复用

- **频分多路复用FDMA**

![image-20200806104133182](https://kay-rick.oss-cn-beijing.aliyuncs.com/img/image-20200806104133182.png)

​		**按频率划分若干频段**，每个频段专用于一个连接，每个频段具有一定的带宽

- **时分多路复用TDMA**

![image-20200806104220677](https://kay-rick.oss-cn-beijing.aliyuncs.com/img/image-20200806104220677.png)

​		**按传输信号的时间进行分割**，它使不同的信号在不同的时间内传送，将整个传输时间分为许多时间间隔，每个时间片被一路信号占用。其划分方式是：先将时间划分为固定时间长度的帧，每帧再划分为固定数量的时隙，每一个时隙专用于一个连接，用于数据传输

</br>

### 分组交换

每个端到端的**数据流被划分为分组，每个分组共享网络资源，每个分组使用全部链路带宽**，资源按需使用

不需要资源预留，按需使用资源，可能要排队等待：**因特网采用的是分组交换技术**。

优点：分组交换带宽共享号，简单，有效，成本更低。**资源按需使用，资源利用率高**。传输过程采用**存储转发机制**。

缺点：**分组交换不适合实时服务：端到端时延不确定，过度竞争导致分组延迟和丢失**

</br>



## 分组交换网络中4种时延

![image-20200806105528301](https://kay-rick.oss-cn-beijing.aliyuncs.com/img/image-20200806105528301.png)

- 处理时延：检查错误位，处理分组头部，选择输出链路所需要额度时间

- 排队时延：分组在路由器内部队列中排队所耗费的时间

  R = 链路带宽 (bps)

  L = 分组长度 (bits)

  a=平均分组到达率(average packet arrival rate)

  流量强度traffic intensity = La/R

  - La/R ~ 0: 分组稀疏到达,无队列,平均排队延迟极小接近于0
  - La/R -> 1: 分组猝发到达,形成队列,队列长度迅速增加,排队延迟大幅增大
  - La/R > 1: 输出队列平均位到达速率超过送走这些位的极限速率，输出队列持续增长，排队延迟趋于无穷大。

  ![image-20200806110819882](https://kay-rick.oss-cn-beijing.aliyuncs.com/img/image-20200806110819882.png)

- **传输时延**：将所有分组的比特推（传输）到链路所需的时间；R = 链路带宽(bps)，L = 分组长度(bits)，发送分组比特流时间 = L / R

- **传播时延**：分组在介质中传送所耗费的时间；d = 物理链路的长度，s = 介质的信号传播速度(~2 × 10^8 m/s)，传播时延 = d / s

  ​									$d_{nodal} =d_{proc} +d_{queue} +d_{trans} +d_{prop} $

</br>



## 分析出现丢包的原因

​		路由器**输入链路和输出链路的缓冲区容量有限**，当分组**到达路由器输入链路发现缓冲区已满或要转发到输出链路时发现输出缓冲区队列已满**，则路由器只好丢弃分组；丢失的分组可能被前路由节点、源节点重传，或不重传

</br>

## 分层体系结构

为了研究和设计方便，一般采用分层的方法，**即按照功能划分为若干个层次，每层功能独立，每两个相邻层之间有一逻辑接口，可交换信息，上一层建立在下一层基础上，上一层可调用下一层的服务，下一层为上一层提供服务**。

优点：使复杂系统简化：讲一个大而复杂系统划分为若干明确、特定的部分，分别讨论研究。**易于维护、系统的更新：某层功能变化不会影响系统其余部分**

缺点：有些功能可能在不同层重复出现：某层的功能可能需要仅存在其他其他层的信息。



</br>

### 因特网协议栈

![image-20200806131134377](https://kay-rick.oss-cn-beijing.aliyuncs.com/img/image-20200806131134377.png)

- **应用层** ：为特定**应用程序提供数据传输服务**，例如 HTTP、DNS 等协议。数据单位为**报文**。
- **传输层** ：为**进程提供通用数据传输服务**。运输层包括两种协议：传输控制协议 TCP，提供面向连接、可靠的数据传输服务，数据单位为**报文段**；用户数据报协议 UDP，提供无连接、尽最大努力的数据传输服务，数据单位为**用户数据报**。
- **网络层** ：为**主机提供数据传输服务**，网络层把传输层传递下来的报文段或者用户数据报封装成**分组**。
- **数据链路层** ：网络层针对的还是主机之间的数据传输服务，而主机之间可以有很多链路，链路层协议就是为**同一链路的主机提供数据传输服务**。数据链路层把网络层传下来的分组封装成**帧**。
- **物理层** ：考虑的是怎样在传输媒体上**传输数据比特流**，而不是指具体的传输媒体。物理层的作用是尽可能屏蔽传输媒体和通信手段的差异，使数据链路层感觉不到这些差异。

</br>

### OSI协议栈

![image-20200806131452108](https://kay-rick.oss-cn-beijing.aliyuncs.com/img/image-20200806131452108.png)

- **表示层** ：数据压缩、加密以及数据描述，这使得应用程序不必关心在各台主机中数据内部格式不同的问题。
- **会话层** ：建立及管理会话。

五层协议没有表示层和会话层，而是将这些功能留给应用程序开发者处理。



### TCP/IP协议栈

![image-20200806132822967](https://kay-rick.oss-cn-beijing.aliyuncs.com/img/image-20200806132822967.png)

它只有四层，相当于五层协议中数据链路层和物理层合并为网络接口层。

TCP/IP 体系结构不严格遵循 OSI 分层概念，应用层可能会直接使用 IP 层或者网络接口层。



## 分层后数据传递的物理过程

![image-20200806134327174](https://kay-rick.oss-cn-beijing.aliyuncs.com/img/image-20200806134327174.png)



主机（端系统）间数据传送实际上并不是在对等层间直接进行，而是**通过相邻层间的传递合作完成。各层发方从上层到下层，收方从下层到上层传递数据：发方添加头部信息创建新的数据单元，收方去掉头部。**

- 源主机：由高层向低层逐层传递（封装）
- 应用层报文M 传递到运输层，附加上运输层首部信息，构成运输层报文段
- 报文段传递到网络层，附加上网络层首部信息，构成网络层数据报；
- 数据报传递到链路层，附加上链路层首部信息，构成链路层帧；
- 传到物理层，送入网络传输。物理层接收，并将其沿协议栈逐层向上传递，每层去除对应的首部，恢复原报文。
- 目的主机：由低层向高层逐层传递（解封）
  